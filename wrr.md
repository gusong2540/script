## 先看一下取前10个元素的结果：
current_weight|从哪些队列取出了元素
------------- | -------------
60            |     0
50            |     0
40            |     0
30            |     0 1
20            |     0 1
10            |     0 1 2

也就是每次for i in (0, 1, 2)的小周期内，当current_weight >= weight[i]时，就把i选出来。当current_weight等于0了，就再从头开始，这算一个大周期。一个大周期包含max(weight)/gcd(weight)个小周期。

那如何证明这样取是符合权值比例的？

可以看到每个小周期中，都是要从权值最大的队列里拿走一个元素的，可以看作拿权值最大的那个作为基准，然后权值较小的直接拿它对比。那仅看权值为10的便可，10是60的1/6，把60分6分，只有1份是应该给10的，所以60直到降到10才满足10的条件。权值30的同理。

其实max(weight)和gcd(weight)都可以选择别的，但选它们两个可以满足最细粒度的平均，即每取出任意10个连续的中间结果，就必然服从权值比例，可以认为是最优的。

## 随机性考虑

WRR的运行结果是固定的，如果需要考虑随机性的话，需要再做一些额外工作。简单的话可以先对队列的顺序做随机，但这样实际的顺序还是固定的。可以按实际需要频繁暂存一定（随机）数量的结果，再随机处理后依次输出。
